<div class="container">
	<div class="col-md-8">
		<h1>Recent Questions</h1>

		<% @questions.each do |question| %>
			<div class="media">
	      <div class="media-body">
	        <h4 class="media-heading">
		  			<p><%= link_to question.title, question_path(question.id) %></p>
		  			 <%question.increment%> <!-- View counter -->
		  			<hr/>
		  		</h4>

		  		<!-- Answer Loop - Start -->
		  		<!-- Attempt No 1 - Start -->
		  		~~~Attempt 1 - Start~~~
		  		<br/>
		  		<%= Vote.group(:answer_id).sum(:value)%>
		  		<br/>
		  		<%= Vote.group(:answer_id).sum(:value).sort_by{|a,b| b}%>
		  		<br/>
		  		<% a=Vote.group(:answer_id).sum(:value).sort_by{|a,b| b}.last[0]%>
		  		<% if a!=[] %>
	        <%= render 'answers/form', answer: Answer.find(a) %> 		  			
		  		<% end %>
	        <br/>
	        <% b= Vote.group(:answer_id).sum(:value).max_by{|k,v| v}[0]%>
	        <% if b!=[] %>
	        <%= render 'answers/form', answer: Answer.find(a) %> 		  			
		  		<% end %>
	       
	        <br/>~~~Attempt 1- End~~~<br/>
					<!-- Attempt No 1 - End -->

	        <!-- Attempt 2 - Start -->  <!-- Not a great way to do this. -->
	        ~~~Attempt 2 - Start~~~
	        <% most_votes = -1 %>
	        <% most_vote_id = [] %>

	        <% question.answers.each do |a| %>
	        	<%if Vote.where(answer_id: a.id).sum(:value) > most_votes %>
	        		<%most_votes=Vote.where(answer_id: a.id).sum(:value)%>
	        		<%most_vote_id=a.id%>
	        	<%end%>
	        <% end %>
	        <br/>
	        Most Votes <%= most_votes %>
	        Most Votes ID <%= most_vote_id %>
	        <%=question.answers.first%>

	        <%if most_vote_id != [] %>
	        <%= render 'answers/form', answer: Answer.find(most_vote_id) %> 
	        <%end%>
	        
	        <br/>~~~Attempt 2 - End~~~<br/>
	        <!-- Attempt 2 - End-->

	        <!-- Answer Loop - End -->
	        
		        <div class="container">
			        <div class="row">
				        <%= button_to "Answer Question", new_question_answer_path(question.id), method: :get, class: 'btn btn-default btn-xs' %>
				        <small><%= question.answers.count %> Answers</small>
			      	</div> <!-- row -->
	      	</div><!-- containter -->
	      </div> <!-- Media Body -->
	   	</div> <!-- Media -->
		<% end %>
	</div> <!-- col-md-8 -->
</div> <!-- containter -->